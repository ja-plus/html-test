<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tesseract.js Offline</title>
  <script src="../node_modules/tesseract.js/dist/tesseract.min.js"></script>
  <script>
    const { createWorker } = Tesseract;
    const worker = createWorker({
      workerPath: '../node_modules/tesseract.js/dist/worker.min.js',
      langPath: '../lang-data',
      corePath: '../node_modules/tesseract.js-core/tesseract-core.wasm.js',
      logger: m => {
        console.log(m);
      },
    });

    async function transferImage2Text(data) {
      await worker.load();
      await worker.loadLanguage('chi_sim');
      await worker.initialize('chi_sim');
      const {
    data: { text },
  } = await worker.recognize(data);
      console.log(text);
      await worker.terminate();
      return text;
    }
  </script>
</head>
<body>
  <input id="file" type="file">
  <pre id="resultText"></pre>
</body>
<script>
  const file = document.querySelector('#file');
  const resultText = document.querySelector('#resultText');
  file.addEventListener('change', async e => {
    console.log('file', e.target.files);
    let text = await transferImage2Text(e.target.files[0]);
    resultText.textContent = text;
  });
</script>
</html>
