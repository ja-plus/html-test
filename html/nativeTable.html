<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>原生表格列宽行为</title>
</head>
<style>
  article section{
    display:flex;
  }
    .container {
        width: 200px;
        border:2px solid #aaa;
        overflow:scroll;
    }
    table {
      border-collapse: collapse;
    }
    table td,
    table th{
        border: 1px solid #aaa;
    }
</style>
<body>
    <article>
      <label>默认</label>
      <section>
        <div class="container">
          <table class="auto-table"> </table>
        </div>
        <fieldset>
          <legend>结论</legend>
          <ol>
            <li>未设置表格table width 的情况下，列宽总和不超过父元素宽度。</li>
          </ol>
        </fieldset>
      </section>
      <section>
        <div class="container">
          <table class="width-table" style="max-width:100%"> </table>
        </div>
        <fieldset>
          <legend>结论</legend>
          <ol>
            <li>总列宽 大于 table宽度时， 则压缩列至minWidth，列width不生效</li>
            <li>总列宽width 小于 table宽度时， 则自动扩展列宽，使其充满table。width/max-width/min-width均不生效</li>
            <li>总列宽width 小于 table宽度时， 扩展未设置width的列</li>
            <li>table 宽度有剩余时，会分配给没设置width的列</li>
            <li>如果每一列都设置了width ，则table 宽度有剩余时，会分配给每一列</li>
            <li>默认情况下，min-width=min-content</li>
            <li>min-width: 列有较高优先级，可压缩设置了width的列，设置了width的列最小可被压缩至min-width(默认min-content)</li>
            <li>width: 是一个参考值，列空间充足时，不能每列都设置，空间不足时又不生效</li>
            <li>max-width: 文字撑开的最大宽度</li>
            <li>max-width: th设置最大宽度不能影响这列的td 的最大宽度，td的最大宽度需要重新指定max-width</li>
          </ol>
        </fieldset>
      </section>
    </article>
</body>
<script type="module">
import h from '../js/utils/h.js';
const autoTable = document.querySelector('.auto-table');
const tHead = h('thead', [
  h('tr', [
    ...new Array(4).fill(0).map((it, i) => {
      return h('th', {
        textContent: String(i).repeat(2),
        style: {
          width: '60px',
          // minWidth: '60px',
          // maxWidth: '60px',
        },
      });
    }),
  ]),
]);
const tBody = h('tbody', [
  ...new Array(2).fill(0).map((it, i) => {
    return h('tr', [
      ...new Array(4).fill(0).map((it2, j) => {
        return h('td', j);
      }),
    ]);
  }),
]);
autoTable.append(tHead, tBody);

document.querySelector('.width-table').append(tHead, tBody);
</script>
</html>