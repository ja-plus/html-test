<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event</title>
</head>

<body>
    <h1>使用CustomEvent做事件总线？</h1>
    <button onclick="btnClick()">点击</button>
</body>
<script>
    let i = 1;
    function btnClick() {
      i++;
      document.dispatchEvent(
        new CustomEvent('dataEvent', {
          detail: {
            data: '点击' + i,
          },
        }),
      );
    }
    
    let myEvent = new Event('turnOn');
    myEvent.name = 'ghagaga'; // 可以在事件对象上添加数据
    document.addEventListener('turnOn', e => {
      console.log('turnOn:', e, e.data); //undefined
      console.log('new Event data:', e.name);
    });
    document.dispatchEvent(myEvent);
    myEvent.name = 'change name gegege';
    document.dispatchEvent(myEvent);

    // 可传入数据的事件
    document.addEventListener('dataEvent', e => {
      console.log(e.detail);
    });
    document.dispatchEvent(
      new CustomEvent('dataEvent', {
        detail: {
          data: '传点数据',
        },
      }),
    );
</script>

</html>